#!/bin/bash

isFocused=$(yabai -m query --windows --window | jq -re ".id")

if [[ -z "$isFocused" ]]; then
  nextWindow=$(yabai -m query --windows | jq -re ".[] | select((.\"is-visible\" == true) and .\"has-focus\" == false).id" | head -n 1)
  yabai -m window --focus $nextWindow
fi

